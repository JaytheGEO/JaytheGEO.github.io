<html>
<head>
  <title>Final Project</title>
  
  <script type="text/javascript" src="city.js"></script>
  <script src="city.js"></script>
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>
  <script src="//cdn.jsdelivr.net/leaflet.esri/1.0.3/esri-leaflet.js"></script>
  <style>
    #map{ width: 900px; height: 500px; }
  </style>
</head>

<body>

  <div id="map"></div>
<script src="city.js" type="text/javascript"></script>
  <script>

  // initialize the map
  var map = L.map('map').setView([43.4090, -63.5244], 2); 

  // load a tile layer
L.esri.basemapLayer('Streets').addTo(map);

var popup = L.popup();

function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(map);
}

map.on('click', onMapClick);
	  
var info = L.control();

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};
	  
info.update = function (edu) {
	const contents = edu ? `<b>${edu.EdNorm} %</b><br />${edu.CountyName}` : 'Hover over a park';
	this._div.innerHTML = `<h4>Population around park</h4>${contents}`;
};

info.addTo(map);	  

const city = L.geoJson(cities).addTo(map); 
    
function highlightFeature(population) {
		var layer = population.target;
		layer.setStyle({
			weight: 3,
			color: '#00ffff',
			dashArray: '',
			fillOpacity: 0.9
		});
		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}
		app.info.update(layer.feature.properties);
	}
	
	function resetHighlight(population) {
		geojson.resetStyle(population.target);
		app.info.update();
	}

	function zoomToFeature(population) {
		app.map.fitBounds(population.target.getBounds());
	}
	
	function onEachFeature(feature, layer) {
		layer.on({
			mouseover: highlightFeature,
			mouseout: resetHighlight,
			click: zoomToFeature
		});
	}  
  </script>
</body>
</html>
